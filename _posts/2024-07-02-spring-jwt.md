---
layout: post
title: JWT
categories: [Spring]
---

프로젝트 중에 JWT를 사용하여서
잘 몰라서.. 공부하고자




## 이전에는?
JWT가 보급되기 전에는 주로 세션 기반 인증 방식이 사용되었다.

세션의 Stateful로 상태를 유지하는 것이 특징이다.  

사용자의 정보를 서버에 저장하고, 클라이언트는 세션ID를 통해 인증 상태를 유지한다.  
  
세션은 서버 메모리나 데이터베이스에 저장되어야하기 때문에 서버 측에서 상태를 유지해야 한다.  

매 요청마다 서버와 통신해야하며, 사용자가 많아지는 경우 부하가 심해질 수 있다.

이러한 문제로 등장한 것이 JWT로 Stateless 인 것이 특징이다.  


<br><br>


## JWT
JSON Web Token의 약자로 정보를 JSON 형태로 클라이언트에 저장하고 서버는 해당 토큰을 검증하여
인증을 처리하는 방식이다.  
  
토큰 안에 미리 인증에 필요한 정보를 넣어두면 매 요청마다 서버와 통신할 필요가 없다.
이로 인해 서버 부하와 같은 문제를 해결할 수 있다.


<br><br>


## 구조
헤더, 페이로드, 서명 세 부분으로 구성된다.  

헤더 부분은 알고리즘 방식과 토큰의 타입을 갖으며, 서명 생성을 위해 어떤 알고리즘을 사용할지 식별하는 부분이다.  
  
페이로드는 클레임이라고 불리는 정보 조각을 포함한다.  
클레임은 토큰에 추가할 정보를 의미하며 사용자 ID, 권한 정보등이 포함된다.  
하지만 디코딩을 통해 들어있는 정보를 확이할 수 있기 때문에 민감한 정보는 포함하지 않는 것이 좋다.  

서명은 토큰을 인코딩하거나 유효성 검증을 위해서 사용되는 부분으로,
헤더와 페이로드를 합친 후 비밀키를 사용하여 생성한다.
  
서버는 클라이언트로부터 받은 토큰을 검증하기 위해 서명 부분을 해싱 알고리즘과 비밀키로 다시 생성하고
이를 클라이언트가 전달한 서명과 비교하여, 일치하면 인증이 유요한 것으로 판단한다.


