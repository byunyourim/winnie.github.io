---
layout: post
title: 티켓팅 시스템 - 개요
categories: [kboticket]
---

올해 유독 KBO의 열기가 뜨거웠다.

나 역시도 야구를 좋아해서 꼭꼭 챙겨보았다.    
  
직관하러 갈 때 주로 티켓링크, 인터파크를 이용하여서 티켓 예매를 했는데   
수천 번대의 대기 순서를 통해 야구의 열기를 한번 더 실감할 수 있었다.   
  
어떤 과정을 거쳐서 이렇게 많은 사람들이 대기하고 들어가서 티켓을 구매할 수 있을까.  

관심이 생겨 대용량 트래픽이 몰리는 티켓 예매 시스템을 프로젝트 주제로 선정하였다.

<br><br>

### 구상
티켓 오픈 시간(경기 7일 전 11시)에 대량의 트래픽이 몰리는 상황을 가정하였다.


<br><br>

## 예매 백엔드 플로우
#### 1. 회원가입/ 로그아웃
   - 유저는 회원가입 및 로그인을 한다. (인증/인가) 
  
#### 2. 경기 목록 조회
   - 원하는 경기 목록을 조회할 수 있으며, 이전 목록은 조회할 수 없다.
   - 오픈된 경기에 한해서 경기 상세(예매) 페이지로 진입 가능
   - 오픈 전인 경우 진입 불가능
   - **비회원 진입 가능**
  
#### 3. 경기 상세(에매) 페이지 진입
   - 인증된 유저만 이용 가능
   - 경기 7일 전 오전 11시에 오픈 (스케줄러)
   - 오픈과 동시에 사용자 접근 (대량의 트래픽이 몰리는 상황 가정)
   - 대기열 구현
  
#### 4. 좌석 선점 (선점 시간 : 7분)
   - 인증된 유저만 이용 가능
   - 다른 유저가 이미 선점한 좌석인 경우: 선점 불가
   - 선점한 유저가 없는 경우 : 선점
  
#### 5. 결제 (토스페이먼츠 이용) 
   - 선점 시간 이내에 결제 진행되어야 한다.
   - 선점 시간 이내에 하지 못한 경우 선점된 좌석은 취소된다.

#### 6. 결제취소 (토스페이먼츠 이용)
   - 선점 시간 이내에 결제 진행되어야 한다.
   - 선점 시간 이내에 하지 못한 경우 선점된 좌석은 취소된다.

#### 7. 예매 상세 내역
   - 인증된 유저만 이용 가능



<br><br>

## db 구조
![db.png](https://github.com/user-attachments/assets/b4bc28f3-3632-40fc-8080-f29c2bf18446)


<br><br>

## 서버 구성
![server.png](https://github.com/user-attachments/assets/be596d28-66f1-427d-9684-7cc848a48455
)








  


