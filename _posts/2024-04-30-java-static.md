---
layout: post
title: static 키워드
categories: Java
---

# 정적 변수란?
<span style="background-color: #D0E4FC">**프로그램의 시작과 동시에 메모리에 로드되어 모든 인스턴스가 공유하는 변수**</span>

모든 객체마다 존재하는 인스턴스 변수와는 다르게 정적 변수는 클래스 당 하나만 존재합니다.  
따라섯 해당 클래스의 모든 객체들이 공유합니다.  
  
  
클래스에 종속되어 있으며 객체의 생성과 무관하게 클래스가 로드될 때 메로리에 할당됩니다.  
  
인스턴스 변수는 객체마다 개별적인 값을 갖지만 정적 변수는 모든 객체가 동일한 값을 공유합니다.  

주로 클래스 메서드(static 메서드)에서 사용됩니다.


<br>



# 정적 메서드?
<span style="background-color: #D0E4FC">**클래스 수준에서 호출할 수 있는 메서드**</span>
  
해당 클래스의 모든 객체들에 의해서 공유되는 메서드로, 객체를 생성하지 않고 클래스 이름으로 직접 호출합니다.  

또한 정적 메서드는 정적 변수만 사용할 수 있습니다.  
정적 메서드는 특정 객체에 속해있지 않기 때문에 this 키워드를 사용할 수 없습니다.  

정적 메서드는 오버라이딩 되지 않으며 따라서 메서드 호출은 컴파일 시간에 결정 됩니다.  

일반적으로 Math 함수와 같이 유틸리티 함수나 독립적인 작업을 수행하는 메서드에서 사용됩니다.  



<br>


### static 과 메모리 낭비?
static 변수와 메소드는 클래스에 속하기 때문에 클래스가 메모리에 로드될 때 초기화 되며, 프로그램이 종료될 때까지 유지됩니다.  
이러한 특징 때문에 메모리 사용량이 적고 어디서나 접근할 수 있어 유용합니다.  

하지만 프로그램 실행 중에 메모리에 상주하기 때문에 큰 객체를 저장하는 경우, 사용되지 않을 때에도 메모리를 차지하게 되어 메모리 낭비가 발생할 수 있습니다.  



<br>



### static 키워드를 사용할 때 주의 사항
static 변수를 사용하여 전역 상태를 관리하는 경우 해당 변수에 접근하여 변경하는 것이 매우 간단합니다.
이것은 코드의 복잡성을 증가시키고 예측하지 못한 결과를 가져올 수 있습니다.  
  
여러 스레드에서 공유될 수 있기 때문에 동시성 문제가 발생할 수 있기 때문에, 스레드간의 동기화를 보장하기 위한
추가적인 처리가 필요합니다.  

전역에서 사용하기 때문에 다른 클래스들이 참조하고 변경할 수 있어 코드의 의존성이 증가하고 클래스 간의 결합도를 높일 수 있습니다.

또한 static 변수를 사용하면 외부에서 의존성을 주입할 수 없기 때문에 테스트에서 예상대로 동작하지
않을 수 있습니다. 그래서 가능한 의존성 주입을 통해 테스트가 가능한 코드를 작성하는 것이 좋습니다.



<br>



### static 변수를 사용할 때 발생할 수 있는 동시성 문제를 해결하기 위한 방법
동시성을 해결하기 위한 방법은 **동기화와 불변성**이 있습니다.

동기화는 여러 스레드가 동시에 static 변수를 읽고 쓰는 것을 방지하기 위해 사용합니다.  

synchronized 키워드를 사용하여 임계영역을 설정하는 방법이 있습니다. 

이렇게 되면 한 번에 하나의 스레드만 임계 영역에 접근할 수 있게 됩니다.  
하지만 성능 저하가 발생할 수 있으므로 필요한 경우에만 사용해야 합니다.  
  

불변성은 static 변수를 변경할 수 없도록 만드는 방법ㄷ입니다. 변수를 **final로 선언**하고 불변 객체를 할당합니다.  
이렇게 하면 동시에 여러 스레드가 변수를 읽을 수는 있지만 변경할 수는 없게됩니다.  
스레드의 안정성을 보장하며 코드를 이해하기 쉽게 만들어줍니다.  
  
  

> #### final
> **변경이 더 이상 불가능하게 하는 키워드**로 변수, 메서드, 클래스에 사용  
> **메서드의 경우** : 재정의 불가  
> **클래스의 경우** : 상속 불가  
> **변수의 경우** : 한 번 값을 할당한 후 값 변경 불가
 


<br>



### static 변수의 사용을 최소화하는 방법?
의존성 주입을 통하여 외부에서 필요한 객체를 주입 받도록 설계할 수 있습니다.  
이를 통해 클래스 간의 결합도를 낮추고 유연한 테스트 가능한 코드를 작성할 수 있습니다.  
  

또한 하나의 인스턴스를 생성하여 사용하는 싱글톤 패턴을 사용하는 방법이 있습니다.  
이것을 통해 static 변수 사용을 최소화하고 필요한 경우에만 인스턴스를 생성하여 메모리를 절약할 수 있습니다.  
  
그리고 스프링과 같은 의존성 주입 프레임워크를 사용하여 의존 관계를 관리하고 필요한 객체를 주입 받는 방법이 있습니다.